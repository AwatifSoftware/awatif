import{v as h,a as ae}from"./styles-CfAimGmv.js";import{a as oe}from"./analyze-D-xiAgwW.js";import{p as ie}from"./parameters-BrAqpr1_.js";import"./_commonjsHelpers-C932wzq6.js";function B(s,t,u,m,g,v,f,d=0){const a=Math.round(s/t);let c=[],i=[],C=[],N=[],T=[];for(let e=0;e<a+1;e++){const S=e*t,r=(f-v)/s,l=v+r*S;c.push([d+S,0,l])}for(let e=0;e<a+1;e++){const S=e*t,r=(g-m)/s,l=m+r*S,y=(f-v)/s,M=v+y*S;c.push([d+S,0,M+l]),C.push(c.length-1)}if(u===1)for(let e=0;e<a;e++)i.push([e,e+1],[a+1+e,a+1+e+1],[e,a+1+e],[e,a+1+e+1]),N.push(i.length-3,i.length-4),T.push(i.length-1,i.length-2);if(u===2)for(let e=0;e<a;e++)i.push([e,e+1],[a+1+e,a+1+e+1],[e,a+1+e],[e+1,a+1+e]),N.push(i.length-3,i.length-4),T.push(i.length-1,i.length-2);if(u===3)for(let e=0;e<a;e++)i.push([e,e+1],[a+1+e,a+1+e+1],[e,a+1+e],[e,a+1+e+1],[e+1,a+1+e]),N.push(i.length-4,i.length-5),T.push(i.length-1,i.length-2,i.length-3);return i.push([a,2*a+1]),T.push(i.length-1),{nodes:c,elements:i,topNodesIndices:C,chordsIndices:N,websIndices:T}}const p={span:{value:h.state(20),min:1,max:20,label:"Span (m)",folder:"Geometry"},spacing:{value:h.state(2.5),min:1,max:5,label:"Spacing (m)",folder:"Geometry"},webType:{value:h.state(1),min:1,max:3,step:1,label:"Web type",folder:"Geometry"},trimType:{value:h.state(1),min:1,max:3,step:1,label:"Trim type",folder:"Geometry"},leftHeight:{value:h.state(2.5),min:1,max:10,step:.1,label:"Left height (m)",folder:"Geometry"},midHeight:{value:h.state(2.5),min:1,max:10,step:.1,label:"Mid height (m)",folder:"Geometry"},rightHeight:{value:h.state(2.5),min:1,max:10,step:.1,label:"Right height (m)",folder:"Geometry"},leftOffset:{value:h.state(0),min:0,max:10,step:.1,label:"Left offset (m)",folder:"Geometry"},midOffset:{value:h.state(5),min:0,max:10,step:.1,label:"Mid offset (m)",folder:"Geometry"},rightOffset:{value:h.state(0),min:0,max:10,step:.1,label:"Right offset (m)",folder:"Geometry"},supportType:{value:h.state(1),min:1,max:2,step:1,label:"Support type",folder:"Supports"},uniformLoad:{value:h.state(300),min:0,max:1e3,step:1,label:"Uniform load (KN/m)",folder:"Loads"},chordsArea:{value:h.state(50),min:1,max:100,step:1,label:"Chords area (cm2)",folder:"Sections & Materials"},chordsElasticity:{value:h.state(10),min:1,max:250,step:1,label:"Chords elasticity (gpa)",folder:"Sections & Materials"},websArea:{value:h.state(50),min:1,max:100,step:1,label:"Webs area (cm2)",folder:"Sections & Materials"},websElasticity:{value:h.state(10),min:1,max:250,step:1,label:"Webs elasticity (gpa)",folder:"Sections & Materials"}},V=h.state([]),X=h.state([]),Y=h.state({}),Z=h.state({});h.derive(()=>{let s=p.span.value.val,t=p.spacing.value.val;const u=p.webType.value.val,m=p.trimType.value.val,g=p.leftHeight.value.val,v=p.midHeight.value.val,f=p.rightHeight.value.val,d=p.leftOffset.value.val,a=p.midOffset.value.val,c=p.rightOffset.value.val,i=p.supportType.value.val,C=p.uniformLoad.value.val,N=p.chordsArea.value.val*1e-4,T=p.chordsElasticity.value.val*1e6,e=p.websArea.value.val*1e-4,S=p.websElasticity.value.val*1e6;let r=[],l=[],y=[],M=[],I=[],O=[];if(t=s/Math.round(s/t),Math.abs(v-.5*(g+f))>.3||Math.abs(a-.5*(d+c))>.3){s=s/2,t=s/Math.round(s/t);const o=Math.round((s-2*t)/t),n=m>=2&&o>=1,b=(g-v)/s,D=g-b*t,w=(d-a)/s,K=d-w*t,{nodes:E,elements:U,topNodesIndices:k,chordsIndices:$,websIndices:ee}=B(n?s-t:s,t,u,n?D:g,v,n?K:d,a,n?t:0);r.push(...E),l.push(...U),M.push(...k),I.push(...$),O.push(...ee);const J=(v-f)/s,P=(a-c)/s;let q=u;u===1&&(q=2),u===2&&(q=1);const{nodes:R,elements:te,topNodesIndices:se,chordsIndices:le,websIndices:ne}=B(n?s-2*t:s-t,t,q,v-J*t,n?f+J*t:f,a-P*t,n?c+P*t:c,s+t);if(I.push(...F(le,l.length)),O.push(...F(ne,l.length)),l.push(...he(te,r.length)),M.push(...F(se,r.length)),r.push(...R),n){r.push([0,0,m==3?g+d:d],[2*s,0,m==3?f+c:c]),M.push(r.length-2,r.length-1);const L=(o+1+1)*2,Q=(o+1)*2,z=L+Q;l.push([0,z],[o+2,z],[L+o,z+1],[L+Q-1,z+1]),I.push(l.length-1,l.length-2,l.length-3,l.length-4)}const j=Math.round(n?(s-1*t)/t:s/t),G=j,W=(j+1)*2,H=(j+1)*2-1,A=H+j+1;if(u===1&&(l.push([G,W],[H,A],[H,W]),I.push(l.length-3,l.length-2),O.push(l.length-1)),u===2&&(l.push([G,W],[H,A],[G,A]),I.push(l.length-3,l.length-2),O.push(l.length-1)),u===3&&(l.push([G,W],[H,A],[G,A],[H,W]),I.push(l.length-4,l.length-3),O.push(l.length-2,l.length-1)),n){const L=E.length+R.length;y.push(L,L+1)}else i===1?y.push(0,E.length+R.length/2-1):y.push(E.length/2,E.length+R.length-1)}else{const o=Math.round((s-2*t)/t),n=m>=2&&o>=1,b=(g-f)/s,D=(d-c)/s,{nodes:w,elements:K,topNodesIndices:E,chordsIndices:U,websIndices:k}=B(n?s-2*t:s,t,u,n?g-b*t:g,n?f+b*t:f,n?d-D*t:d,n?c+D*t:c,n?t:0);r.push(...w),l.push(...K),M.push(...E),I.push(...U),O.push(...k),n&&(r.push([0,0,m==3?g+d:d],[s,0,m==3?f+c:c]),M.push(r.length-2,r.length-1),l.push([0,(o+1)*2],[o+1,(o+1)*2],[o,(o+1)*2+1],[o*2+1,(o+1)*2+1]),I.push(l.length-1,l.length-2,l.length-3,l.length-4)),n?y.push(w.length,w.length+1):i===1?y.push(0,w.length/2-1):y.push(w.length/2,w.length-1)}const x={materials:new Map,sections:new Map,pointSupports:new Map,pointLoads:new Map};y.forEach(o=>{var n;return(n=x.pointSupports)==null?void 0:n.set(o,[!0,!0,!0,!0,!0,!0])}),M.forEach(o=>{var n;return(n=x.pointLoads)==null?void 0:n.set(o,[0,0,-C*t,0,0,0])}),I.forEach(o=>{var n,b;(n=x.materials)==null||n.set(o,{elasticity:T}),(b=x.sections)==null||b.set(o,{area:N})}),O.forEach(o=>{var n,b;(n=x.materials)==null||n.set(o,{elasticity:e}),(b=x.sections)==null||b.set(o,{area:S})});const _=oe(r,l,x);V.val=r,X.val=l,Y.val=x,Z.val=_});document.body.append(ie(p),ae({structure:{nodes:V,elements:X,analysisInputs:Y,analysisOutputs:Z},settingsObj:{deformedShape:!0,loads:!1}}));function he(s,t){return s.map(([u,m])=>[u+t,m+t])}function F(s,t){return s.map(u=>u+t)}
