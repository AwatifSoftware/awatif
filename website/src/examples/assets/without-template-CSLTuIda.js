import{a as q}from"./styles-BOGCXN8A.js";let a=Object.getPrototypeOf,p,g,o,i,x={isConnected:1},z=1e3,u,T={},B=a(x),M=a(a),_,W=(e,t,r,l)=>(e??(setTimeout(r,l),new Set)).add(t),k=(e,t,r)=>{let l=o;o=t;try{return e(r)}catch(s){return console.error(s),r}finally{o=l}},b=e=>e.filter(t=>{var r;return(r=t._dom)==null?void 0:r.isConnected}),G=e=>u=W(u,e,()=>{for(let t of u)t._bindings=b(t._bindings),t._listeners=b(t._listeners);u=_},z),m={get val(){var e;return(e=o==null?void 0:o._getters)==null||e.add(this),this.rawVal},get oldVal(){var e;return(e=o==null?void 0:o._getters)==null||e.add(this),this._oldVal},set val(e){var t;(t=o==null?void 0:o._setters)==null||t.add(this),e!==this.rawVal&&(this.rawVal=e,this._bindings.length+this._listeners.length?(g==null||g.add(this),p=W(p,this,D)):this._oldVal=e)}},I=e=>({__proto__:m,rawVal:e,_oldVal:e,_bindings:[],_listeners:[]}),w=(e,t)=>{let r={_getters:new Set,_setters:new Set},l={f:e},s=i;i=[];let n=k(e,r,t);n=(n??document).nodeType?n:new Text(n);for(let d of r._getters)r._setters.has(d)||(G(d),d._bindings.push(l));for(let d of i)d._dom=n;return i=s,l._dom=n},V=(e,t=I(),r)=>{let l={_getters:new Set,_setters:new Set},s={f:e,s:t};s._dom=r??(i==null?void 0:i.push(s))??x,t.val=k(e,l,t.rawVal);for(let n of l._getters)l._setters.has(n)||(G(n),n._listeners.push(s));return t},L=(e,...t)=>{for(let r of t.flat(1/0)){let l=a(r??0),s=l===m?w(()=>r.val):l===M?w(r):r;s!=_&&e.append(s)}return e},F=(e,t,...r)=>{var d;let[l,...s]=a(r[0]??0)===B?r:[{},...r],n=e?document.createElementNS(e,t):document.createElement(t);for(let[h,f]of Object.entries(l)){let S=c=>c?Object.getOwnPropertyDescriptor(c,h)??S(a(c)):_,C=t+","+h,O=T[C]??(T[C]=((d=S(a(n)))==null?void 0:d.set)??0),P=h.startsWith("on")?(c,N)=>{let A=h.slice(2);n.removeEventListener(A,N),n.addEventListener(A,c)}:O?O.bind(n):n.setAttribute.bind(n,h),v=a(f??0);h.startsWith("on")||v===M&&(f=V(f),v=m),v===m?w(()=>(P(f.val,f._oldVal),n)):P(f)}return L(n,s)},j=e=>({get:(t,r)=>F.bind(_,e,r)}),K=(e,t)=>t?t!==e&&e.replaceWith(t):e.remove(),D=()=>{let e=0,t=[...p].filter(l=>l.rawVal!==l._oldVal);do{g=new Set;for(let l of new Set(t.flatMap(s=>s._listeners=b(s._listeners))))V(l.f,l.s,l._dom),l._dom=_}while(++e<100&&(t=[...g]).length);let r=[...p].filter(l=>l.rawVal!==l._oldVal);p=_;for(let l of new Set(r.flatMap(s=>s._bindings=b(s._bindings))))K(l._dom,w(l.f,l._dom)),l._dom=_;for(let l of r)l._oldVal=l.rawVal};const E={tags:new Proxy(e=>new Proxy(F,j(e)),j()),hydrate:(e,t)=>K(e,w(t,e)),add:L,state:I,derive:V},y={nodes:E.state([]),elements:E.state([])};y.nodes.val=[[0,0,0],[0,0,10],[10,0,0]];y.elements.val=[[0,2],[1,2]];document.body.appendChild(q(y));
