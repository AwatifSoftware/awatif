import{w as E,v as d,b as M,c as p,d as z,k as A,L,B as I,e as k,F as B,a as D}from"./styles-BVh1WFMK.js";function b(t,e,r){const s=document.createElement("div"),l={size:"120px",resizable:!1},n=new E({name:Math.random().toString().substring(2),box:s,selectType:"cell",show:{columnMenu:!1},columns:[{...l,field:"recid",text:"Index",size:"50px",style:"background-color: #f4f6f9"},...t.map(i=>({...l,...i}))],records:h(e.rawVal),contextMenu:[{id:"delete",text:"Delete row",icon:"w2ui-icon-cross"},{id:"Insert",text:"Insert row",icon:"w2ui-icon-plus"}],onDelete:i=>i.preventDefault()});let a=n.records.length;return s.setAttribute("id","grid"),n.onChange=i=>{const o=t[i.detail.column-1].field;n.records[i.detail.index][o]=i.detail.value.new,r&&r(w(n.records,Array.isArray(e.rawVal)))},n.onContextMenuClick=i=>{const o=i.detail.menuItem.id;o=="delete"&&(n.records=n.records.filter(g=>g.recid!=i.detail.recid)),o=="Insert"&&n.records.push({recid:a++}),n.refresh(),r&&r(w(n.records,Array.isArray(e.rawVal)))},d.derive(()=>{n.records=h(e.val),n.refresh()}),new ResizeObserver(()=>n.refresh()).observe(s),s}function h(t){if(Array.isArray(t))return t.map((r,s)=>({recid:s,...r}));const e=[];return t.forEach((r,s)=>e.push({recid:s,...r})),e}function w(t,e){if(e)return t.map(s=>{const{recid:l,w2ui:n,...a}=s;return Object.values(a)});const r=new Map;return t.forEach(s=>{const{recid:l,w2ui:n,...a}=s;r.set(l,a)}),r}function O(t,e){const r=document.createElement("div"),s=document.createElement("div"),l=[],n=new Map;t.forEach((i,o)=>{l.push({id:o,text:i.text}),n.set(o,b(i.columns,i.data,f))});const a=new M({box:s,name:"tabs",active:l[0].id,flow:"up",tabs:l});r.id="sheets",s.id="tabs",r.append(n.values().next().value,s),a.onClick=i=>{r.firstChild.replaceWith(n.get(i.target))};function f(i){e&&e({sheet:a.active,data:i})}return r}function V({topLeft:t,topRight:e,main:r,preview:s,right:l}){const n=document.createElement("div"),a="border: 1px solid #efefef",f=new p({name:"topLayout",panels:[...t?[{type:"left",size:"50%",html:u(t.element)}]:[],...e?[{type:"right",html:u(e.element)}]:[]]});return new p({box:n,name:"layout",panels:[...t||e?[{type:"top",size:60,style:a,html:f}]:[],{type:"main",style:a,html:u(r.element),...r.title?{title:r.title}:{}},...s?[{type:"preview",size:"50%",resizable:!0,style:a,html:u(s.element),...s.title?{title:s.title}:{}}]:[],...l?[{type:"right",size:"65%",resizable:!0,style:a,html:u(l.element),...l.title?{title:l.title}:{}}]:[]]}),n.id="layout",n}function u(t){return{render:function(){this.box.append(t)}}}function C(t){const e=document.createElement("div"),r=A`<svg
      class="flex-shrink-0 size-7"
      xmlns="http://www.w3.org/2000/svg"
      width="40"
      height="40"
      viewBox="0 -3 35 35"
      fill="#015f73"
    >
      <path
        d="M2,29.14l9.86-16.87c1.86,3.34,4.56,7.62,3.34,11.57a7.61,7.61,0,0,1-2.61,3.68,7.78,7.78,0,0,1-5,1.61c-1.48,0-3,0-4.47,0A4.5,4.5,0,0,0,2,29.14Z"
      ></path>
      <path
        d="M12.86,10.43l5.71-10L35.12,29.14H31a13.92,13.92,0,0,1-8.44-3.54,18.23,18.23,0,0,1-3.44-4.5c-.55-.92-1.08-1.85-1.61-2.79-1.25-2.21-2.56-4.39-3.85-6.58Z"
      ></path>
    </svg>

    <h1>${t}</h1>`;return e.id="title",z(r,e),e}const c=d.state([[0,0,0],[5,0,5],[10,0,0]]),v=d.state([]),y=new L(new I,new k),m=d.state([y]),x=new Map;x.set("polyline",{text:"Polyline",columns:[{field:"0",text:"X-coordinate",editable:{type:"float"}},{field:"1",text:"Y-coordinate",editable:{type:"float"}},{field:"2",text:"Z-coordinate",editable:{type:"float"}}],data:c});const j=({data:t})=>c.val=t;d.derive(()=>{y.geometry.setAttribute("position",new B(c.val.flat(),3)),m.val=[...m.rawVal]});d.derive(()=>{const t=[];for(let e=0;e<c.val.length-1;e++)t.push([F(c.rawVal[e],c.rawVal[e+1]).toFixed(2),`${e} - ${e+1}`]);v.val=t});document.body.append(V({topLeft:{element:C("App Example")},main:{element:O(x,j),title:"Inputs"},preview:{element:b([{field:"0",text:"Line Length"},{field:"1",text:"Between"}],v),title:"Outputs"},right:{element:D({objects3D:m})}}));function F(t,e){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}
