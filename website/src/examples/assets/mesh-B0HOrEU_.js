import{v as X}from"./styles-DwJTuBfT.js";function Xe(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function xe(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var o=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};o.prototype=e.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var u=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(o,n,u.get?u:{enumerable:!0,get:function(){return s[n]}})}),o}const Je={},Ke=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"})),ee=xe(Ke);var ye={exports:{}};(function(s,e){var o=function(){var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(r){r=r||{};var r=typeof r<"u"?r:{},v,M;r.ready=new Promise(function(t,i){v=t,M=i});var w={},S;for(S in r)r.hasOwnProperty(S)&&(w[S]=r[S]);var O=function(t,i){throw i},I=!1,y=!1,h=!1,d=!1;I=typeof window=="object",y=typeof importScripts=="function",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",d=!I&&!h&&!y;var g="";function T(t){return r.locateFile?r.locateFile(t,g):g+t}var R,E,B,N;h?(y?g=ee.dirname(g)+"/":g=__dirname+"/",R=function(i,a){return B||(B=ee),N||(N=ee),i=N.normalize(i),B.readFileSync(i,a?null:"utf8")},E=function(i){var a=R(i,!0);return a.buffer||(a=new Uint8Array(a)),te(a.buffer),a},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(t){if(!(t instanceof he))throw t}),process.on("unhandledRejection",C),O=function(t){process.exit(t)},r.inspect=function(){return"[Emscripten Module object]"}):d?(typeof read<"u"&&(R=function(i){return read(i)}),E=function(i){var a;return typeof readbuffer=="function"?new Uint8Array(readbuffer(i)):(a=read(i,"binary"),te(typeof a=="object"),a)},typeof scriptArgs<"u"&&scriptArgs,typeof quit=="function"&&(O=function(t){quit(t)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(I||y)&&(y?g=self.location.href:document.currentScript&&(g=document.currentScript.src),n&&(g=n),g.indexOf("blob:")!==0?g=g.substr(0,g.lastIndexOf("/")+1):g="",R=function(i){var a=new XMLHttpRequest;return a.open("GET",i,!1),a.send(null),a.responseText},y&&(E=function(i){var a=new XMLHttpRequest;return a.open("GET",i,!1),a.responseType="arraybuffer",a.send(null),new Uint8Array(a.response)}));var Ae=r.print||console.log.bind(console),H=r.printErr||console.warn.bind(console);for(S in w)w.hasOwnProperty(S)&&(r[S]=w[S]);w=null,r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.quit&&(O=r.quit);var q;r.wasmBinary&&(q=r.wasmBinary);var x;r.noExitRuntime&&(x=r.noExitRuntime),typeof WebAssembly!="object"&&C("no native wasm support detected");var D,J,K=!1;function te(t,i){t||C("Assertion failed: "+i)}var re=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ne(t,i,a){for(var m=i+a,b=i;t[b]&&!(b>=m);)++b;if(b-i>16&&t.subarray&&re)return re.decode(t.subarray(i,b));for(var p="";i<b;){var l=t[i++];if(!(l&128)){p+=String.fromCharCode(l);continue}var f=t[i++]&63;if((l&224)==192){p+=String.fromCharCode((l&31)<<6|f);continue}var P=t[i++]&63;if((l&240)==224?l=(l&15)<<12|f<<6|P:l=(l&7)<<18|f<<12|P<<6|t[i++]&63,l<65536)p+=String.fromCharCode(l);else{var me=l-65536;p+=String.fromCharCode(55296|me>>10,56320|me&1023)}}return p}function be(t,i){return t?ne(W,t,i):""}function we(t,i,a,m){if(!(m>0))return 0;for(var b=a,p=a+m-1,l=0;l<t.length;++l){var f=t.charCodeAt(l);if(f>=55296&&f<=57343){var P=t.charCodeAt(++l);f=65536+((f&1023)<<10)|P&1023}if(f<=127){if(a>=p)break;i[a++]=f}else if(f<=2047){if(a+1>=p)break;i[a++]=192|f>>6,i[a++]=128|f&63}else if(f<=65535){if(a+2>=p)break;i[a++]=224|f>>12,i[a++]=128|f>>6&63,i[a++]=128|f&63}else{if(a+3>=p)break;i[a++]=240|f>>18,i[a++]=128|f>>12&63,i[a++]=128|f>>6&63,i[a++]=128|f&63}}return i[a]=0,a-b}function Te(t,i,a){return we(t,W,i,a)}function Re(t){for(var i=0,a=0;a<t.length;++a){var m=t.charCodeAt(a);m>=55296&&m<=57343&&(m=65536+((m&1023)<<10)|t.charCodeAt(++a)&1023),m<=127?++i:m<=2047?i+=2:m<=65535?i+=3:i+=4}return i}var ie=65536,G,W,U;function Pe(t){G=t,r.HEAP8=new Int8Array(t),r.HEAP16=new Int16Array(t),r.HEAP32=U=new Int32Array(t),r.HEAPU8=W=new Uint8Array(t),r.HEAPU16=new Uint16Array(t),r.HEAPU32=new Uint32Array(t),r.HEAPF32=new Float32Array(t),r.HEAPF64=new Float64Array(t)}var Z=r.INITIAL_MEMORY||16777216;r.wasmMemory?D=r.wasmMemory:D=new WebAssembly.Memory({initial:Z/ie,maximum:Z/ie}),D&&(G=D.buffer),Z=G.byteLength,Pe(G);var se=[],ae=[],Se=[],oe=[];function Fe(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Ne(r.preRun.shift());Y(se)}function Me(){Y(ae)}function Oe(){Y(Se)}function Ie(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Ue(r.postRun.shift());Y(oe)}function Ne(t){se.unshift(t)}function Ue(t){oe.unshift(t)}var $=0,k=null;function $e(t){$++,r.monitorRunDependencies&&r.monitorRunDependencies($)}function Be(t){if($--,r.monitorRunDependencies&&r.monitorRunDependencies($),$==0&&k){var i=k;k=null,i()}}r.preloadedImages={},r.preloadedAudios={};function C(t){r.onAbort&&r.onAbort(t),t+="",H(t),K=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var i=new WebAssembly.RuntimeError(t);throw M(i),i}function fe(t,i){return String.prototype.startsWith?t.startsWith(i):t.indexOf(i)===0}var He="data:application/octet-stream;base64,";function ue(t){return fe(t,He)}var Ce="file://";function le(t){return fe(t,Ce)}var F="triangle.out.wasm";ue(F)||(F=T(F));function ce(){try{if(q)return new Uint8Array(q);if(E)return E(F);throw"both async and sync fetching of the wasm failed"}catch(t){C(t)}}function Le(){return!q&&(I||y)&&typeof fetch=="function"&&!le(F)?fetch(F,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+F+"'";return t.arrayBuffer()}).catch(function(){return ce()}):Promise.resolve().then(ce)}function qe(){var t={a:Ve};function i(l,f){var P=l.exports;r.asm=P,J=r.asm.g,Be()}$e();function a(l){i(l.instance)}function m(l){return Le().then(function(f){return WebAssembly.instantiate(f,t)}).then(l,function(f){H("failed to asynchronously prepare wasm: "+f),C(f)})}function b(){if(!q&&typeof WebAssembly.instantiateStreaming=="function"&&!ue(F)&&!le(F)&&typeof fetch=="function")fetch(F,{credentials:"same-origin"}).then(function(l){var f=WebAssembly.instantiateStreaming(l,t);return f.then(a,function(P){return H("wasm streaming compile failed: "+P),H("falling back to ArrayBuffer instantiation"),m(a)})});else return m(a)}if(r.instantiateWasm)try{var p=r.instantiateWasm(t,i);return p}catch(l){return H("Module.instantiateWasm callback failed with error: "+l),!1}return b(),{}}function Y(t){for(;t.length>0;){var i=t.shift();if(typeof i=="function"){i(r);continue}var a=i.func;typeof a=="number"?i.arg===void 0?J.get(a)():J.get(a)(i.arg):a(i.arg===void 0?null:i.arg)}}function De(t,i,a){W.copyWithin(t,i,i+a)}function We(t){C("OOM")}function ke(t){We()}function ze(t){Qe(t)}var V={mappings:{},buffers:[null,[],[]],printChar:function(t,i){var a=V.buffers[t];i===0||i===10?((t===1?Ae:H)(ne(a,0)),a.length=0):a.push(i)},varargs:void 0,get:function(){V.varargs+=4;var t=U[V.varargs-4>>2];return t},getStr:function(t){var i=be(t);return i},get64:function(t,i){return t}};function Ge(t,i,a,m){for(var b=0,p=0;p<a;p++){for(var l=U[i+p*8>>2],f=U[i+(p*8+4)>>2],P=0;P<f;P++)V.printChar(t,W[l+P]);b+=f}return U[m>>2]=b,0}function Ye(t){var i=Date.now();return U[t>>2]=i/1e3|0,U[t+4>>2]=i%1e3*1e3|0,0}ae.push({func:function(){ge()}});var Ve={d:De,e:ke,f:ze,c:Ge,b:Ye,a:D};qe();var ge=r.___wasm_call_ctors=function(){return(ge=r.___wasm_call_ctors=r.asm.h).apply(null,arguments)};r._malloc=function(){return(r._malloc=r.asm.i).apply(null,arguments)},r._free=function(){return(r._free=r.asm.j).apply(null,arguments)},r._triangulate=function(){return(r._triangulate=r.asm.k).apply(null,arguments)},r.stringToUTF8=Te,r.lengthBytesUTF8=Re;var Q;function he(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}k=function t(){Q||j(),Q||(k=t)};function j(t){if($>0||(Fe(),$>0))return;function i(){Q||(Q=!0,r.calledRun=!0,!K&&(Me(),Oe(),v(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Ie()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),i()},1)):i()}r.run=j;function Qe(t,i){x||(r.onExit&&r.onExit(t),K=!0),O(t,new he(t))}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return x=!0,j(),r.ready}}();s.exports=o})(ye);var Ze=ye.exports;const je=Ze;let c={};const et=s=>{const e=c.lengthBytesUTF8(s)+1,o=c._malloc(e);return c.stringToUTF8(s,o,e),o},A=(s,e=Int32Array)=>{if(!s||!s.length)return null;const o=tt(s,e),n=c._malloc(o.length*o.BYTES_PER_ELEMENT),u=n/o.BYTES_PER_ELEMENT,r=_e(e);return c[r].subarray(u,u+o.length).set(o),n},_=(s,e,o=Int32Array)=>{if(!s)return null;const n=s/o.BYTES_PER_ELEMENT,u=_e(o);return c[u].subarray(n,n+e)},_e=s=>{switch(s){case Float64Array:return"HEAPF64";case Int32Array:return"HEAP32";default:return"HEAP8"}},tt=(s,e)=>s.constructor==e?s:new e(s),ve=(s,e,o=null)=>{if(typeof s=="string")return s;(typeof s!="object"||!s)&&(s={});let n="";return s.pslg!==!1&&(n=`${n}p`),n=`${n}z`,o!==null&&(n=`${n}v`),s.quiet!==!1&&(n=`${n}Q`),s.refine===!0&&(n=`${n}r`),s.regionAttr===!0&&(n=`${n}A`),s.convexHull===!0&&(n=`${n}c`),s.ccdt===!0&&(n=`${n}D`),s.jettison===!0&&(n=`${n}j`),s.edges===!0&&(n=`${n}e`),s.neighbors===!0&&(n=`${n}n`),s.quadratic===!0&&(n=`${n}o2`),s.bndMarkers===!1&&(n=`${n}B`),s.holes===!1&&(n=`${n}O`),typeof s.steiner=="number"&&(n=`${n}S${s.steiner}`),typeof s.quality=="number"?n=`${n}q${s.quality}`:s.quality===!0&&(n=`${n}q`),typeof s.area=="number"?n=`${n}a${s.area}`:s.area===!0&&(n=`${n}a`),s.quiet===!1&&console.log("Switches:",n),n};class z{static get LENGTH(){return 23}constructor(e={}){this.ptr=c._malloc(z.LENGTH*Int32Array.BYTES_PER_ELEMENT),this.arr=_(this.ptr,z.LENGTH),this.arr.set(new Int32Array(z.LENGTH));for(const o in e)o in this&&(this[o]=e[o])}destroy(e){c._free(this.arr[0]),c._free(this.arr[1]),c._free(this.arr[2]),c._free(this.arr[5]),c._free(this.arr[6]),c._free(this.arr[7]),c._free(this.arr[8]),c._free(this.arr[12]),c._free(this.arr[13]),c._free(this.arr[19]),c._free(this.arr[20]),c._free(this.arr[21]),c._free(this.ptr),e&&(c._free(this.arr[15]),c._free(this.arr[17]))}set pointlist(e){this.arr[0]=A(e,Float64Array),this.arr[3]=e?~~(e.length*.5):0}set pointattributelist(e){this.arr[1]=A(e,Float64Array),this.arr[4]=e?~~(e.length/this.numberofpoints):0}set pointmarkerlist(e){this.arr[2]=A(e)}set numberofpoints(e){}set numberofpointattributes(e){}set trianglelist(e){this.arr[5]=A(e),this.arr[9]=e?~~(e.length/3):0}set triangleattributelist(e){this.arr[6]=A(e,Float64Array),this.arr[11]=e?~~(e.length/this.numberoftriangles):0}set trianglearealist(e){this.arr[7]=A(e,Float64Array)}set neighborlist(e){this.arr[8]=A(e)}set numberoftriangles(e){}set numberofcorners(e){}set numberoftriangleattributes(e){}set segmentlist(e){this.arr[12]=A(e),this.arr[14]=e?~~(e.length*.5):0}set segmentmarkerlist(e){this.arr[13]=A(e)}set numberofsegments(e){}set holelist(e){this.arr[15]=A(e,Float64Array),this.arr[16]=e?~~(e.length*.5):0}set numberofholes(e){}set regionlist(e){this.arr[17]=A(e,Float64Array),this.arr[18]=e?~~(e.length*.25):0}set numberofregions(e){}set edgelist(e){this.arr[19]=A(e),this.arr[22]=e?~~(e.length*.5):0}set edgemarkerlist(e){this.arr[20]=A(e)}set normlist(e){this.arr[21]=A(e,Float64Array)}set numberofedges(e){}get pointlist(){return _(this.arr[0],this.numberofpoints*2,Float64Array)}get pointattributelist(){return _(this.arr[1],this.numberofpointattributes*this.numberofpoints,Float64Array)}get pointmarkerlist(){return _(this.arr[2],this.numberofpoints)}get numberofpoints(){return this.arr[3]}get numberofpointattributes(){return this.arr[4]}get trianglelist(){return _(this.arr[5],this.numberoftriangles*this.numberofcorners)}get triangleattributelist(){return _(this.arr[6],this.numberoftriangleattributes*this.numberoftriangles,Float64Array)}get trianglearealist(){return _(this.arr[7],this.numberoftriangles,Float64Array)}get neighborlist(){return _(this.arr[8],this.numberoftriangles*3)}get numberoftriangles(){return this.arr[9]}get numberofcorners(){return this.arr[10]}get numberoftriangleattributes(){return this.arr[11]}get segmentlist(){return _(this.arr[12],this.numberofsegments*2)}get segmentmarkerlist(){return _(this.arr[13],this.numberofsegments)}get numberofsegments(){return this.arr[14]}get holelist(){return _(this.arr[15],this.numberofholes*2,Float64Array)}get numberofholes(){return this.arr[16]}get regionlist(){return _(this.arr[17],this.numberofregions*4,Float64Array)}get numberofregions(){return this.arr[18]}get edgelist(){return _(this.arr[19],this.numberofedges*2)}get edgemarkerlist(){return _(this.arr[20],this.numberofedges)}get normlist(){return _(this.arr[21],this.numberofedges*2,Float64Array)}get numberofedges(){return this.arr[22]}}const rt=s=>new Promise((e,o)=>{je({locateFile:(n,u)=>s||u+n}).then(n=>{c=n,e()})}),nt=(s,e,o,n=null)=>{const u=ve(s,e,n),r=et(u),v=n?n.ptr:null;c._triangulate(r,e.ptr,o.ptr,v),c._free(r)},it=s=>new z(s),st=(s,e)=>{s.destroy(e)};var at={init:rt,triangulate:nt,makeIO:it,freeIO:st,getSwitchesStr:ve};const L=Xe(at),ot=""+new URL("triangle-CCJHBrBP.wasm",import.meta.url).href;function ft({faces:s,points:e,subdivisions:o=1}){for(let n=0;n<o;n++){const u=[...e],r=new Map,v=ut(s),M=new Map,w=new Map;v.forEach((y,h)=>{const d=[];s.forEach((g,T)=>{de(y,g)&&d.push(T)}),w.set(h,d)});const S=new Map,O=new Map;e.forEach((y,h)=>{const d=[];v.forEach((T,R)=>{T.includes(h)&&d.push(R)}),S.set(h,d);const g=new Set;d.forEach(T=>{var R;(R=w.get(T))==null||R.forEach(E=>{g.add(E)})}),O.set(h,Array.from(g))}),s.forEach((y,h)=>{const d=y.map(T=>e[T]),g=pe(d);e.push(g),r.set(h,e.length-1)}),v.forEach((y,h)=>{const d=y.map(E=>e[E]);(w.get(h)??[]).map(E=>r.get(E)??-1).map(E=>e[E]);const R=pe([...d]);e.push(R),M.set(h,e.length-1)});const I=[];u.forEach((y,h)=>{var d;(d=O.get(h))==null||d.forEach(g=>{const T=r.get(g)??-1,B=(S.get(h)??[]).filter(N=>de(v[N],s[g])).map(N=>M.get(N)??-1);I.push([h,B[0],T,B[1]])})}),s=I}return{faces:s,points:e}}function pe(s){const e=s.reduce((n,u)=>[n[0]+u[0],n[1]+u[1]],[0,0]),o=s.length;return[e[0]/o,e[1]/o]}function ut(s){const e=new Set;return s.forEach(o=>{for(let n=0;n<o.length;n++){const u=o[n],r=o[(n+1)%o.length],v=u<r?`${u},${r}`:`${r},${u}`;e.add(v)}}),Array.from(e).map(o=>o.split(",").map(Number))}function de(s,e){const[o,n]=s;for(let u=0;u<e.length;u++)if(e[u]===o&&e[(u+1)%e.length]===n||e[u]===n&&e[(u+1)%e.length]===o)return!0;return!1}const Ee=X.state(!1);L.init(ot).then(()=>Ee.val=!0);function mt({points:s,polygon:e}){const o=X.state([]),n=X.state([]);return X.derive(()=>{if(!Ee.val)return;const u=L.makeIO({pointlist:s.val.flat(),segmentlist:lt(e.val)}),r=L.makeIO();L.triangulate("pzQOS300q30a3",u,r);const{points:v,faces:M}=ft({points:ct(r),faces:gt(r),subdivisions:0});o.val=v.map(w=>[w[0],0,w[1]]),n.val=M,L.freeIO(u,!0),L.freeIO(r)}),{nodes:o,elements:n}}function lt(s){const e=[];for(let o=0;o<s.length;o+=1)e.push(s[o],s[(o+1)%s.length]);return e}function ct(s){const e=[],o=s.pointlist;for(let n=0;n<o.length;n+=2)e.push([o[n],o[n+1]]);return e}function gt(s){const e=[],o=s.trianglelist;for(let n=0;n<o.length;n+=3)e.push([o[n],o[n+1],o[n+2]]);return e}export{Xe as g,mt as m};
