import{w as y,b as w,c as h,L as g,B as v,d as x,v as p,F as E,a as A}from"./w2ui-2.0.min-D4Yu0pzf.js";function D(n,o){const e=document.createElement("details"),t=document.createElement("summary");return e.id="collapsible",t.innerText=n,e.append(t,o),e}function C(n,o,e,t){const s=document.createElement("div"),i={size:"120px",sortable:!0,resizable:!1},a=new y({name:M(n),selectType:"cell",columns:[{...i,field:"recid",text:"Index",size:"50px",style:"background-color: #f4f6f9"},...o.map(r=>({...i,...r}))],records:z(e),onDelete:r=>r.preventDefault()});return s.setAttribute("id","grid"),s.style.height="250px",a.render(s),a.onChange=r=>{const d=o[r.detail.column-1].field;a.records[r.detail.index][d]=r.detail.value.new,t&&t({name:a.name,data:B(a.records,Array.isArray(e))})},s}function z(n){if(Array.isArray(n))return n.map((e,t)=>({recid:t,...e}));const o=[];return n.forEach((e,t)=>o.push({recid:t,...e})),o}function B(n,o){if(o)return n.map(t=>{const{recid:s,w2ui:i,...a}=t;return Object.values(a)});const e=new Map;return n.forEach(t=>{const{recid:s,w2ui:i,...a}=t;e.set(s,a)}),e}function M(n){return n.replace(/[^a-zA-Z0-9-_]/g,"")}function j(n,o){const e=document.createElement("div"),t=document.createElement("div"),s=D("Sheets",e),i=({name:l,data:c})=>{o&&o({sheet:l,data:c}),console.log(l,c)},a=[],r=new Map;n.forEach((l,c)=>{a.push({id:c,text:l.text}),r.set(c,C(c,l.columns,l.data,i))});const d=new w({box:t,name:"sheets",active:a[0].id,flow:"up",tabs:a});return e.id="sheets",t.id="tabs",s.style.position="absolute",s.style.left="8px",s.style.bottom="0px",s.style.width="50%",e.append(r.values().next().value,t),d.onClick=l=>{e.firstChild.replaceWith(r.get(l.target)),h[l.target].refresh()},s}const f=p.state([[0,0,0],[5,0,5],[10,0,0]]),m=new g(new v,new x),u=p.state([m]),b=new Map;b.set("polyline",{text:"Polyline",data:f.rawVal,columns:[{field:"0",text:"X-coordinate",editable:{type:"float"}},{field:"1",text:"Y-coordinate",editable:{type:"float"}},{field:"2",text:"Z-coordinate",editable:{type:"float"}}]});const L=({data:n})=>{f.val=n};p.derive(()=>{m.geometry.setAttribute("position",new E(f.val.flat(),3)),u.val=[...u.rawVal]});document.body.append(j(b,L));document.body.appendChild(A({objects3D:u}));
