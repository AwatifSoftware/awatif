import{B as j,R as L,V as E,S as Z,M as R,b as v,L as z,c as X,d as F,e as V,D as k,P as q,f as U,a as h,F as _,l as H,t as J,m as K,s as Q,g as W,v as $}from"./marketing-g5H_3RuK.js";function C(t,e,o,r,n){if(o(t)*o(e)>=0)return null;let i=t,s=0;for(;e-t>=r&&s<n&&(i=(t+e)/2,o(i)!=0);)o(t)*o(i)<0?e=i:t=i,s++;return i}const tt=1e5;function et(t){const e=M(t),[o,r]=b(t),[n,i]=B(t),[s,a]=it(t),{Sxt:l,Sxb:P,Syt:S,Syb:g}=rt(t),[x,m]=st(t),[A,p]=at(t,x,m);return{area:Math.round(e),Ixx:Math.round(o),Iyy:Math.round(r),centroid_x:Math.round(n),centroid_y:Math.round(i),rx:Math.round(s),ry:Math.round(a),Sxt:Math.round(l),Sxb:Math.round(P),Syt:Math.round(S),Syb:Math.round(g),PNAx:Math.round(x*100)/100,PNAy:Math.round(m*100)/100,Zxp:Math.round(A),Zyp:Math.round(p)}}function ot(t){return t.pointsInMesh.map(e=>[e[0],e[1]])}function nt(t){const e=dt(t),{basePoint:o,xDomain:r,yDomain:n}=lt(e),i=ct(o,r,n,tt),s=xt(i,e);return{mesh:e,basePoint:o,xDomain:r,yDomain:n,pointsInBox:i,pointsInMesh:s}}function M(t){const e=t.xDomain*t.yDomain;return t.pointsInMesh.length/t.pointsInBox.length*e}function b(t){const e=M(t),[o,r]=B(t);let n=0,i=0;t.pointsInMesh.forEach(l=>{n+=(l[1]-r)**2,i+=(l[0]-o)**2});const s=n/t.pointsInMesh.length*e,a=i/t.pointsInMesh.length*e;return[s,a]}function it(t){const e=M(t),[o,r]=b(t),n=Math.sqrt(o/e),i=Math.sqrt(r/e);return[n,i]}function rt(t){const[e,o]=b(t),[r,n]=B(t),i=t.basePoint[1]+t.yDomain-n,s=n-t.basePoint[1],a=t.basePoint[0]+t.xDomain-r,l=r-t.basePoint[0];return{Sxt:e/i,Sxb:e/s,Syt:o/a,Syb:o/l}}function st(t){function r(x,m){const[A,p]=yt(t.pointsInMesh,x,m);return(A-p)/t.pointsInMesh.length}const n=0,i=t.basePoint[n],s=t.basePoint[n]+t.xDomain,a=C(i,s,x=>r(x,n),.001*t.xDomain,100),l=1,P=t.basePoint[l],S=t.basePoint[l]+t.yDomain,g=C(P,S,x=>r(x,l),.001*t.yDomain,100);return[a,g]}function at(t,e,o){const r=M(t);let n=0,i=0;t.pointsInMesh.forEach(l=>{n+=Math.abs(l[0]-e),i+=Math.abs(l[1]-o)});const s=i/t.pointsInMesh.length*r,a=n/t.pointsInMesh.length*r;return[s,a]}function B(t){let e=0,o=0;t.pointsInMesh.forEach(i=>{e+=i[0],o+=i[1]});const r=e/t.pointsInMesh.length,n=o/t.pointsInMesh.length;return[r,n]}function lt(t){const e=new j().setFromObject(t),o=e.max.sub(e.min);return{basePoint:e.min.toArray(),xDomain:o.x,yDomain:o.y}}function ct(t,e,o,r){const n=[];for(let i=0;i<r;i++)n.push([t[0]+Math.random()*e,t[1]+Math.random()*o,0]);return n}function xt(t,e){const o=new L;return t.filter(n=>(o.set(new E(...n),new E(0,0,-1)),o.intersectObject(e).length))}function dt(t){const e=new Z,o=t[0];e.moveTo(o[0],o[1]);for(const r of t.slice(1))e.lineTo(r[0],r[1]);return new R(new v(e))}function yt(t,e,o){let r=0,n=0;return t.forEach(i=>{i[o]>e?r++:n++}),[r,n]}function O(t,e,o=0){const r=[];for(let n=0;n<t.length;n+=2){const i=t[n],s=t[n+1];let a=[o,o,o];a[e.x]=i,a[e.y]=s,r.push(a)}return r.flat()}function ft(t,e,o=!1){if(t.length==0)return[new Array(e).fill(0)];const r=t.map(n=>n.map(i=>i===""?0:Number(i)));return o?r.map(n=>n.map(i=>i<0?0:i)):r}const d=165,y=10.2,f=201,u=6.2,c=h.state([[0,0],[d,0],[d,y],[(d-u)/2+u,y],[(d-u)/2+u,f-y],[d,f-y],[d,f],[0,f],[0,f-y],[(d-u)/2,f-y],[(d-u)/2,y],[0,y],[0,0]]),Y=h.state({modulusOfElasticity:2e5,shearModulus:3e4,massDensity:200}),G=h.state({area:0,Ixx:0,Iyy:0,centroid_x:0,centroid_y:0,rx:0,ry:0,Sxt:0,Sxb:0,Syt:0,Syb:0,PNAx:0,PNAy:0,Zxp:0,Zyp:0}),I=new z(new X,new F({color:"#c5d62f"})),w=new R(new v,new V({visible:!1,side:k})),T=new q(new X,new U({color:"#c5d62f"})),D=h.state([I,w,T]),N=new Map;N.set("SectionGeometry",{text:"Section Geometry",data:c,fields:[{field:"A",text:"X-coordinate",editable:{type:"float"}},{field:"B",text:"Y-coordinate",editable:{type:"float"}}]});N.set("MaterialProperties",{text:"Material Properties",data:Y,fields:[{field:"A",text:"Material Property",size:"150px",editable:!1},{field:"B",text:"Value",editable:{type:"float"}},{field:"modulusOfElasticity",text:"Modulus of Elasticity",editable:{type:"float"}},{field:"shearModulus",text:"Shear Modulus",editable:{type:"float"}},{field:"massDensity",text:"Mass Density",editable:{type:"float"}}]});const ut=({sheet:t,data:e})=>{t=="SectionGeometry"?c.val=ft(e,2):t=="MaterialProperties"&&(Y.val={modulusOfElasticity:e[0][1],shearModulus:e[1][1],massDensity:e[2][1]})};h.derive(()=>{I.geometry.setAttribute("position",new _(O(c.val.flat(),{x:0,y:2}),3));const t=new Z;t.moveTo(c.val[0][0],c.val[0][1]);for(var e=1;e<c.val.length;++e)t.lineTo(c.val[e][0],c.val[e][1]);w.geometry=new v(t),w.rotation.x=Math.PI/2;const o=nt(c.val);T.geometry.setAttribute("position",new _(O(ot(o).flat(),{x:0,y:2}),3)),D.val=[...D.rawVal],G.val=et(o)});document.body.append(H({topLeft:{element:J("Section Designer")},topRight:{element:K({})},main:{element:Q({sheets:N,onChange:ut}),title:"Inputs"},preview:{element:W({fields:[{field:"A",text:"Parameter",size:"225px",editable:!1},{field:"B",text:"Value"},{field:"area",text:"Area"},{field:"Ixx",text:"Ixx"},{field:"Iyy",text:"Iyy"},{field:"centroid_x",text:"Centroid X"},{field:"centroid_y",text:"Centroid Y"},{field:"rx",text:"Radius of Gyration X"},{field:"ry",text:"Radius of Gyration Y"},{field:"Sxt",text:"Elastic Section Modulus X (Top)"},{field:"Sxb",text:"Elastic Section Modulus X (Bottom)"},{field:"Syt",text:"Elastic Section Modulus Y (Top)"},{field:"Syb",text:"Elastic Section Modulus Y (Bottom)"},{field:"PNAx",text:"Plastic Neutral Axis X"},{field:"PNAy",text:"Plastic Neutral Axis Y"},{field:"Zxp",text:"Plastic Section Modulus X"},{field:"Zyp",text:"Plastic Section Modulus Y"}],data:G}),title:"Output"},right:{element:$({objects3D:D,settingsObj:{gridSize:450}})}}));
